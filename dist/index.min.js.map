{"version":3,"file":"index.min.js","sources":["../src/index.jsx"],"sourcesContent":["import { useState } from 'react'\n\nexport function useHubspotForm({ portalId, formId, fields }) {\n\tconst [$response, set$response] = useState(null)\n\tconst [$result, set$result] = useState(null)\n\n\tasync function onSubmit(e) {\n\t\te.preventDefault()\n\n\t\tconst fields = Array.from(e.target.elements)\n\t\t\t.filter(({ name }) => !!name)\n\t\t\t.map(input => ({\n\t\t\t\tname: input.name,\n\t\t\t\tvalue: input.type == 'checkbox' ? String(input.checked) : input.value,\n\t\t\t}))\n\n\t\tconst response = await submitHubspot({ portalId, formId, fields })\n\t\tset$response(response)\n\t\tset$result(response?.ok && await response.json())\n\t}\n\n\tconst Fields = fields.map(field => {\n\t\tconst Field =\n\t\t\tfield.type === 'checkbox' ? Checkbox :\n\t\t\tfield.type === 'select' ? Select :\n\t\t\tfield.type === 'textarea' ? Textarea :\n\t\t\tInput\n\n\t\treturn ({ component: Component = Field, ...props } = {}) =>\n\t\t\t<Component {...field} {...props} />\n\t})\n\n\tconst Form = ({ children, ...props }) => {\n\t\t// redirect\n\t\tif ($response?.ok && !!$result?.redirectUri) {\n\t\t\twindow.location.href = $result.redirectUri\n\t\t\treturn <p>Redirecting...</p>\n\t\t}\n\n\t\t// response message\n\t\tif ($response?.ok && !!$result?.inlineMessage) {\n\t\t\treturn <div dangerouslySetInnerHTML={{ __html: $result.inlineMessage }} />\n\t\t}\n\n\t\treturn <form onSubmit={onSubmit} {...props}>\n\t\t\t{children || <>\n\t\t\t\t{Fields?.map((Field, key) => <Field key={key} />)}\n\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t</>}\n\t\t</form>\n\t}\n\n\treturn {\n\t\tonSubmit,\n\t\tresponse: $response,\n\t\tresult: $result,\n\t\tFields,\n\t\tForm,\n\t}\n}\n\nasync function submitHubspot({ portalId, formId, fields }) {\n\tconst url = `https://api.hsforms.com/submissions/v3/integration/submit/${ portalId }/${ formId }`\n\treturn await fetch(url, {\n\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tbody: JSON.stringify({ fields })\n\t})\n}\n\n/* fields */\n\nconst Input = ({ label, className, value, ...props }) => (\n\t// TODO: add error handling\n\t<label htmlFor={props.name} className={className}>\n\t\t<small>{label}{props.required && <span>*</span>}</small>\n\t\t<input\n\t\t\tid={props.name}\n\t\t\tplaceholder={label}\n\t\t\tdefaultValue={value}\n\t\t\t{...props}\n\t\t/>\n\t</label>\n)\n\nconst Textarea = ({ label, className, value, ...props }) => (\n\t<label htmlFor={props.name}>\n\t\t<small>{label}{props.required && <span>*</span>}</small>\n\t\t<textarea\n\t\t\tid={props.name}\n\t\t\tplaceholder={label}\n\t\t\tchildren={value}\n\t\t\t{...props}\n\t\t/>\n\t</label>\n)\n\nconst Select = ({ label, options, value = '', className, ...props }) => (\n\t<label htmlFor={props.name} className={className}>\n\t\t<small>{label}{props.required && <span>*</span>}</small>\n\t\t<select id={props.name} defaultValue={value} {...props}>\n\t\t\t<option value=\"\" disabled>Please select</option>\n\t\t\t{options?.map((option, key) => (\n\t\t\t\t<option value={option} key={key}>{option}</option>\n\t\t\t))}\n\t\t</select>\n\t</label>\n)\n\nconst Checkbox = ({ label, className, value, ...props }) => (\n\t<label htmlFor={props.name} className={className}>\n\t\t<input\n\t\t\tid={props.name}\n\t\t\tdefaultChecked={value}\n\t\t\tdefaultValue={value}\n\t\t\t{...props}\n\t\t/>\n\t\t{label}\n\t</label>\n)\n"],"names":["useHubspotForm","portalId","formId","fields","$response","set$response","useState","$result","set$result","async","onSubmit","e","preventDefault","Array","from","target","elements","filter","name","map","input","value","type","String","checked","response","url","fetch","method","headers","body","JSON","stringify","submitHubspot","ok","json","Fields","field","Field","Checkbox","Select","Textarea","Input","component","Component","props","React","createElement","result","Form","children","redirectUri","window","location","href","inlineMessage","dangerouslySetInnerHTML","__html","_extends","key","label","className","htmlFor","required","id","placeholder","defaultValue","options","disabled","option","defaultChecked"],"mappings":"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"}