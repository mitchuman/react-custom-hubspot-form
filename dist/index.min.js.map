{"version":3,"file":"index.min.js","sources":["../src/index.jsx"],"sourcesContent":["import { useState } from 'react'\n\nexport function useHubspotForm({ portalId, formId, fields }) {\n\tconst [$response, set$response] = useState(null)\n\tconst [$result, set$result] = useState(null)\n\n\tasync function onSubmit(e) {\n\t\te.preventDefault()\n\n\t\tconst fields = Array.from(e.target.elements)\n\t\t\t.filter(({ name }) => !!name)\n\t\t\t.map(input => ({\n\t\t\t\tname: input.name,\n\t\t\t\tvalue: input.type == 'checkbox' ? String(input.checked) : input.value,\n\t\t\t}))\n\n\t\tconst response = await submitHubspot({ portalId, formId, fields })\n\t\tset$response(response)\n\t\tset$result(response?.ok && await response.json())\n\t}\n\n\tconst Fields = fields.map(field => {\n\t\tconst Field =\n\t\t\tfield.type === 'checkbox' ? Checkbox :\n\t\t\tfield.type === 'select' ? Select :\n\t\t\tfield.type === 'textarea' ? Textarea :\n\t\t\tInput\n\n\t\treturn ({ component: Component = Field, ...props } = {}) =>\n\t\t\t<Component {...field} {...props} />\n\t})\n\n\tconst Form = ({ children, ...props }) => {\n\t\t// redirect\n\t\tif ($response?.ok && !!$result?.redirectUri) {\n\t\t\twindow.location.href = $result.redirectUri\n\t\t\treturn <p>Redirecting...</p>\n\t\t}\n\n\t\t// response message\n\t\tif ($response?.ok && !!$result?.inlineMessage) {\n\t\t\treturn <div dangerouslySetInnerHTML={{ __html: $result.inlineMessage }} />\n\t\t}\n\n\t\treturn <form onSubmit={onSubmit} {...props}>\n\t\t\t{children || <>\n\t\t\t\t{Fields?.map((Field, key) => <Field key={key} />)}\n\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t</>}\n\t\t</form>\n\t}\n\n\treturn {\n\t\tonSubmit,\n\t\tresponse: $response,\n\t\tresult: $result,\n\t\tFields,\n\t\tForm,\n\t}\n}\n\nasync function submitHubspot({ portalId, formId, fields }) {\n\tconst url = `https://api.hsforms.com/submissions/v3/integration/submit/${ portalId }/${ formId }`\n\treturn await fetch(url, {\n\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tbody: JSON.stringify({ fields })\n\t})\n}\n\n/* fields */\n\nconst Input = ({ label, className, value, ...props }) => (\n\t// TODO: add error handling\n\t<label htmlFor={props.name} className={className}>\n\t\t<small>{label}{props.required && <span>*</span>}</small>\n\t\t<input\n\t\t\tid={props.name}\n\t\t\tplaceholder={label}\n\t\t\tdefaultValue={value}\n\t\t\t{...props}\n\t\t/>\n\t</label>\n)\n\nconst Textarea = ({ label, className, value, ...props }) => (\n\t<label htmlFor={props.name}>\n\t\t<small>{label}{props.required && <span>*</span>}</small>\n\t\t<textarea\n\t\t\tid={props.name}\n\t\t\tplaceholder={label}\n\t\t\tchildren={value}\n\t\t\t{...props}\n\t\t/>\n\t</label>\n)\n\nconst Select = ({ label, options, value = '', className, ...props }) => (\n\t<label htmlFor={props.name} className={className}>\n\t\t<small>{label}{props.required && <span>*</span>}</small>\n\t\t<select id={props.name} defaultValue={value} {...props}>\n\t\t\t<option value=\"\" disabled>Please select</option>\n\t\t\t{options?.map((option, key) => (\n\t\t\t\t<option value={option} key={key}>{option}</option>\n\t\t\t))}\n\t\t</select>\n\t</label>\n)\n\nconst Checkbox = ({ label, className, value, ...props }) => (\n\t<label htmlFor={props.name} className={className}>\n\t\t<input\n\t\t\tid={props.name}\n\t\t\tdefaultChecked={value}\n\t\t\tdefaultValue={value}\n\t\t\t{...props}\n\t\t/>\n\t\t{label}\n\t</label>\n)\n"],"names":["Input","label","className","value","props","React","createElement","htmlFor","name","required","_extends","id","placeholder","defaultValue","Textarea","children","Select","options","disabled","map","option","key","Checkbox","defaultChecked","portalId","formId","fields","$response","set$response","useState","$result","set$result","async","onSubmit","e","preventDefault","Array","from","target","elements","filter","input","type","String","checked","response","url","fetch","method","headers","body","JSON","stringify","submitHubspot","ok","json","Fields","field","Field","component","Component","result","Form","redirectUri","window","location","href","inlineMessage","dangerouslySetInnerHTML","__html"],"mappings":"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"}