import{useState as e}from"react";import{jsx as l,jsxs as a,Fragment as n}from"react/jsx-runtime";function t({portalId:t,formId:c,fields:d}){const[m,u]=e(null),[h,p]=e(null);async function f(e){e.preventDefault();const l=Array.from(e.target.elements).filter((({name:e})=>!!e)).map((e=>({name:e.name,value:"checkbox"==e.type?String(e.checked):e.value}))),a=await async function({portalId:e,formId:l,fields:a}){const n=`https://api.hsforms.com/submissions/v3/integration/submit/${e}/${l}`;return await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:a})})}({portalId:t,formId:c,fields:l});u(a),p(a?.ok&&await a.json())}const b=d.map((e=>{const a="checkbox"===e.type?o:"select"===e.type?s:"textarea"===e.type?i:r;return({component:n=a,...t}={})=>l(n,{...e,...t})}));return{onSubmit:f,response:m,result:h,Fields:b,Form:({children:e,...t})=>m?.ok&&h?.redirectUri?(window.location.href=h.redirectUri,l("p",{children:"Redirecting..."})):m?.ok&&h?.inlineMessage?l("div",{dangerouslySetInnerHTML:{__html:h.inlineMessage}}):l("form",{onSubmit:f,...t,children:e||a(n,{children:[b?.map(((e,a)=>l(e,{},a))),l("button",{type:"submit",children:"Submit"})]})})}}const r=({label:e,className:n,value:t,...r})=>a("label",{htmlFor:r.name,className:n,children:[a("small",{children:[e,r.required&&l("span",{children:"*"})]}),l("input",{id:r.name,placeholder:e,defaultValue:t,...r})]}),i=({label:e,className:n,value:t,...r})=>a("label",{htmlFor:r.name,children:[a("small",{children:[e,r.required&&l("span",{children:"*"})]}),l("textarea",{id:r.name,placeholder:e,children:t,...r})]}),s=({label:e,options:n,value:t="",className:r,...i})=>a("label",{htmlFor:i.name,className:r,children:[a("small",{children:[e,i.required&&l("span",{children:"*"})]}),a("select",{id:i.name,defaultValue:t,...i,children:[l("option",{value:"",disabled:!0,children:"Please select"}),n?.map(((e,a)=>l("option",{value:e,children:e},a)))]})]}),o=({label:e,className:n,value:t,...r})=>a("label",{htmlFor:r.name,className:n,children:[l("input",{id:r.name,defaultChecked:t,defaultValue:t,...r}),e]});export{t as useHubspotForm};
