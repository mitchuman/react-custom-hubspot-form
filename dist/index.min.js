import{useState as e}from"react";import{jsx as l,jsxs as a,Fragment as n}from"react/jsx-runtime";function r({portalId:r,formId:c,fields:d,submitLabel:m="Submit",debug:u,apiKey:p}){const[h,f]=e(null),[b,y]=e(null);async function g(e){e.preventDefault();const l=Array.from(e.target.elements).filter((({name:e})=>!!e)).map((e=>({name:e.name,value:"checkbox"==e.type?String(e.checked):e.value}))),a=await async function({portalId:e,formId:l,fields:a}){const n=`https://api.hsforms.com/submissions/v3/integration/submit/${e}/${l}`;return await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:a})})}({portalId:r,formId:c,fields:l});f(a),y(a?.ok&&await a.json())}u&&function({formId:e,apiKey:l}){let a="";if(l){a=`${`https://api.hubapi.com/forms/v2/forms/${e}?hapikey=${l}`}\n\n(Look under \`formFieldGroups\`)`}else a="`apiKey` is undefined";console.debug(`%c useHubspotForm %cdebug: true\n\n${a}`,"background-color: #fff; color: #000;")}({formId:c,apiKey:p});const v=d.map((e=>{const a="checkbox"===e.type?s:"select"===e.type?o:"textarea"===e.type?i:t;return({component:n=a,...r}={})=>l(n,{...e,...r})}));return{onSubmit:g,response:h,result:b,Fields:v,Form:({children:e,...r})=>h?.ok&&b?.redirectUri?(window.location.href=b.redirectUri,l("p",{children:"Redirecting..."})):h?.ok&&b?.inlineMessage?l("div",{dangerouslySetInnerHTML:{__html:b.inlineMessage}}):l("form",{onSubmit:g,...r,children:e||a(n,{children:[v?.map(((e,a)=>l(e,{},a))),l("button",{type:"submit",children:m})]})})}}const t=({label:e,className:n,value:r,...t})=>a("label",{htmlFor:t.name,className:n,children:[a("small",{children:[e,t.required&&l("span",{children:"*"})]}),l("input",{id:t.name,placeholder:e,defaultValue:r,...t})]}),i=({label:e,className:n,value:r,...t})=>a("label",{htmlFor:t.name,className:n,children:[a("small",{children:[e,t.required&&l("span",{children:"*"})]}),l("textarea",{id:t.name,placeholder:e,defaultValue:r,...t})]}),o=({label:e,options:n,value:r="",className:t,...i})=>a("label",{htmlFor:i.name,className:t,children:[a("small",{children:[e,i.required&&l("span",{children:"*"})]}),a("select",{id:i.name,defaultValue:r,...i,children:[l("option",{value:"",disabled:!0,children:"Please select"}),n?.map(((e,a)=>l("option",{value:e,children:e},a)))]})]}),s=({label:e,className:n,value:r,...t})=>a("label",{htmlFor:t.name,className:n,children:[l("input",{id:t.name,defaultChecked:r,defaultValue:r,...t}),e]});export{r as useHubspotForm};
