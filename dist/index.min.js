import{useState as e}from"react";import{jsx as l,jsxs as a,Fragment as n}from"react/jsx-runtime";function r({portalId:r,formId:c,fields:d,debug:m,apiKey:u}){const[p,h]=e(null),[f,b]=e(null);async function y(e){e.preventDefault();const l=Array.from(e.target.elements).filter((({name:e})=>!!e)).map((e=>({name:e.name,value:"checkbox"==e.type?String(e.checked):e.value}))),a=await async function({portalId:e,formId:l,fields:a}){const n=`https://api.hsforms.com/submissions/v3/integration/submit/${e}/${l}`;return await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:a})})}({portalId:r,formId:c,fields:l});h(a),b(a?.ok&&await a.json())}m&&function({formId:e,apiKey:l}){let a="";if(l){a=`${`https://api.hubapi.com/forms/v2/forms/${e}?hapikey=${l}`}\n\n(Look under \`formFieldGroups\`)`}else a="`apiKey` is undefined";console.debug(`%c useHubspotForm %cdebug: true\n\n${a}`,"background-color: #fff; color: #000;")}({formId:c,apiKey:u});const g=d.map((e=>{const a="checkbox"===e.type?s:"select"===e.type?o:"textarea"===e.type?t:i;return({component:n=a,...r}={})=>l(n,{...e,...r})}));return{onSubmit:y,response:p,result:f,Fields:g,Form:({children:e,...r})=>p?.ok&&f?.redirectUri?(window.location.href=f.redirectUri,l("p",{children:"Redirecting..."})):p?.ok&&f?.inlineMessage?l("div",{dangerouslySetInnerHTML:{__html:f.inlineMessage}}):l("form",{onSubmit:y,...r,children:e||a(n,{children:[g?.map(((e,a)=>l(e,{},a))),l("button",{type:"submit",children:"Submit"})]})})}}const i=({label:e,className:n,value:r,...i})=>a("label",{htmlFor:i.name,className:n,children:[a("small",{children:[e,i.required&&l("span",{children:"*"})]}),l("input",{id:i.name,placeholder:e,defaultValue:r,...i})]}),t=({label:e,className:n,value:r,...i})=>a("label",{htmlFor:i.name,children:[a("small",{children:[e,i.required&&l("span",{children:"*"})]}),l("textarea",{id:i.name,placeholder:e,children:r,...i})]}),o=({label:e,options:n,value:r="",className:i,...t})=>a("label",{htmlFor:t.name,className:i,children:[a("small",{children:[e,t.required&&l("span",{children:"*"})]}),a("select",{id:t.name,defaultValue:r,...t,children:[l("option",{value:"",disabled:!0,children:"Please select"}),n?.map(((e,a)=>l("option",{value:e,children:e},a)))]})]}),s=({label:e,className:n,value:r,...i})=>a("label",{htmlFor:i.name,className:n,children:[l("input",{id:i.name,defaultChecked:r,defaultValue:r,...i}),e]});export{r as useHubspotForm};
