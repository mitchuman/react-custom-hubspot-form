import{useState as e}from"react";import{jsx as a,jsxs as l,Fragment as t}from"react/jsx-runtime";function n({portalId:n,formId:c,fields:m,submitLabel:u="Submit",debug:p,apiKey:h}){const[f,b]=e(null),[y,v]=e(null);async function g(e){e.preventDefault();const a=Array.from(e.target.elements).filter((({name:e})=>!!e)).map((e=>({name:e.name,value:"checkbox"==e.type?String(e.checked):e.value}))),l=await async function({portalId:e,formId:a,fields:l}){const t=`https://api.hsforms.com/submissions/v3/integration/submit/${e}/${a}`;return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:l})})}({portalId:n,formId:c,fields:a});b(l),v(l?.ok&&await l.json())}p&&function({formId:e,apiKey:a}){let l="";if(a){l=`${`https://api.hubapi.com/forms/v2/forms/${e}?hapikey=${a}`}\n\n(Look under \`formFieldGroups\`)`}else l="`apiKey` is undefined";console.debug(`%c useHubspotForm %cdebug: true\n\n${l}`,"background-color: #fff; color: #000;")}({formId:c,apiKey:h});const k=m.map((e=>{const l="radio"===e.type?s:"checkbox"===e.type?d:"select"===e.type?o:"textarea"===e.type?r:i;return({component:t=l,...n}={})=>a(t,{...e,...n})}));return{onSubmit:g,response:f,result:y,Fields:k,Form:({children:e,...n})=>f?.ok&&y?.redirectUri?(window.location.href=y.redirectUri,a("p",{children:"Redirecting..."})):f?.ok&&y?.inlineMessage?a("div",{dangerouslySetInnerHTML:{__html:y.inlineMessage}}):a("form",{onSubmit:g,...n,children:e||l(t,{children:[k?.map(((e,l)=>a(e,{},l))),a("button",{type:"submit",children:u})]})})}}const i=({label:e,value:t,className:n,...i})=>l("label",{htmlFor:i.name,className:n,"data-type":i.type||"text",children:[l("small",{children:[e,i.required&&a("span",{children:"*"})]}),a("input",{id:i.name,placeholder:e,defaultValue:t,...i})]}),r=({label:e,value:t,className:n,...i})=>l("label",{htmlFor:i.name,className:n,"data-type":i.type,children:[l("small",{children:[e,i.required&&a("span",{children:"*"})]}),a("textarea",{id:i.name,placeholder:e,defaultValue:t,...i})]}),o=({label:e,options:t,value:n="",className:i,...r})=>l("label",{htmlFor:r.name,className:i,"data-type":r.type,children:[l("small",{children:[e,r.required&&a("span",{children:"*"})]}),l("select",{id:r.name,defaultValue:n,...r,children:[a("option",{value:"",disabled:!0,children:"Please select"}),t?.map(((e,l)=>a("option",{value:e,children:e},l)))]})]}),d=({label:e,value:t,className:n,...i})=>l("label",{htmlFor:i.name,className:n,"data-type":i.type,children:[a("input",{id:i.name,defaultChecked:t,defaultValue:t,...i}),e]}),s=({label:e,options:t,value:n,className:i,...r})=>l("div",{children:[l("small",{children:[e,r.required&&a("span",{children:"*"})]}),t?.map(((e,t)=>l("label",{children:[a("input",{defaultChecked:e,defaultValue:n,...r}),e]},t)))]});export{n as useHubspotForm};
