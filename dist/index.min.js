import{useState as e}from"react";import{jsx as a,jsxs as l,Fragment as t}from"react/jsx-runtime";function n({portalId:n,formId:d,fields:c,submitLabel:m="Submit",debug:u,apiKey:p}){const[h,f]=e(null),[b,y]=e(null);async function g(e){e.preventDefault();const a=Array.from(e.target.elements).filter((({name:e})=>!!e)).map((e=>({name:e.name,value:"checkbox"==e.type?String(e.checked):e.value}))),l=await async function({portalId:e,formId:a,fields:l}){const t=`https://api.hsforms.com/submissions/v3/integration/submit/${e}/${a}`;return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:l})})}({portalId:n,formId:d,fields:a});f(l),y(l?.ok&&await l.json())}u&&function({formId:e,apiKey:a}){let l="";if(a){l=`${`https://api.hubapi.com/forms/v2/forms/${e}?hapikey=${a}`}\n\n(Look under \`formFieldGroups\`)`}else l="`apiKey` is undefined";console.debug(`%c useHubspotForm %cdebug: true\n\n${l}`,"background-color: #fff; color: #000;")}({formId:d,apiKey:p});const v=c.map((e=>{const l="checkbox"===e.type?s:"select"===e.type?o:"textarea"===e.type?i:r;return({component:t=l,...n}={})=>a(t,{...e,...n})}));return{onSubmit:g,response:h,result:b,Fields:v,Form:({children:e,...n})=>h?.ok&&b?.redirectUri?(window.location.href=b.redirectUri,a("p",{children:"Redirecting..."})):h?.ok&&b?.inlineMessage?a("div",{dangerouslySetInnerHTML:{__html:b.inlineMessage}}):a("form",{onSubmit:g,...n,children:e||l(t,{children:[v?.map(((e,l)=>a(e,{},l))),a("button",{type:"submit",children:m})]})})}}const r=({label:e,className:t,value:n,...r})=>l("label",{htmlFor:r.name,className:t,"data-type":r.type||"text",children:[l("small",{children:[e,r.required&&a("span",{children:"*"})]}),a("input",{id:r.name,placeholder:e,defaultValue:n,...r})]}),i=({label:e,className:t,value:n,...r})=>l("label",{htmlFor:r.name,className:t,"data-type":r.type,children:[l("small",{children:[e,r.required&&a("span",{children:"*"})]}),a("textarea",{id:r.name,placeholder:e,defaultValue:n,...r})]}),o=({label:e,options:t,value:n="",className:r,...i})=>l("label",{htmlFor:i.name,className:r,"data-type":i.type,children:[l("small",{children:[e,i.required&&a("span",{children:"*"})]}),l("select",{id:i.name,defaultValue:n,...i,children:[a("option",{value:"",disabled:!0,children:"Please select"}),t?.map(((e,l)=>a("option",{value:e,children:e},l)))]})]}),s=({label:e,className:t,value:n,...r})=>l("label",{htmlFor:r.name,className:t,"data-type":r.type,children:[a("input",{id:r.name,defaultChecked:n,defaultValue:n,...r}),e]});export{n as useHubspotForm};
