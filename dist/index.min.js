import{useState as e}from"react";import{jsxs as a,jsx as l,Fragment as t}from"react/jsx-runtime";const n=({label:e,value:t,className:n,...i})=>a("label",{htmlFor:i.name,className:n,"data-type":i.type||"text",children:[a("small",{children:[e,i.required&&l("span",{children:"*"})]}),l("input",{id:i.name,placeholder:e,defaultValue:t,...i})]}),i=({label:e,value:t,className:n,...i})=>a("label",{htmlFor:i.name,className:n,"data-type":i.type,children:[a("small",{children:[e,i.required&&l("span",{children:"*"})]}),l("textarea",{id:i.name,placeholder:e,defaultValue:t,...i})]}),r=({label:e,options:t,value:n="",className:i,...r})=>a("label",{htmlFor:r.name,className:i,"data-type":r.type,children:[a("small",{children:[e,r.required&&l("span",{children:"*"})]}),a("select",{id:r.name,defaultValue:n,...r,children:[l("option",{value:"",disabled:!0,children:"Please select"}),t?.map(((e,a)=>l("option",{value:e,children:e},a)))]})]}),o=({label:e,value:t,className:n,...i})=>a("label",{htmlFor:i.name,className:n,"data-type":i.type,children:[l("input",{id:i.name,defaultChecked:t,defaultValue:t,...i}),e]}),d=({label:e,options:t,value:n,className:i,...r})=>a("div",{className:i,"data-type":r.type,children:[a("small",{children:[e,r.required&&l("span",{children:"*"})]}),t?.map(((e,t)=>a("label",{children:[l("input",{defaultChecked:n===e,defaultValue:n===e&&e,...r}),e]},t)))]});function c({portalId:c,formId:s,fields:m,submitLabel:u="Submit",debug:p,apiKey:h}){const[f,b]=e(null),[y,g]=e(null);async function k(e){e.preventDefault();const a=Array.from(e.target.elements).filter((({name:e})=>!!e)).map((e=>({name:e.name,value:"checkbox"==e.type?String(e.checked):e.value}))),l=await async function({portalId:e,formId:a,fields:l}){const t=`https://api.hsforms.com/submissions/v3/integration/submit/${e}/${a}`,n="undefined"==typeof document||"undefined"==typeof location?{}:{hutk:document.cookie.match(/hubspotutk=([^;]+)/)?.[1],pageUri:location.href,pageName:document.title};return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:l,context:n})})}({portalId:c,formId:s,fields:a});b(l),g(l?.ok&&await l.json())}p&&function({formId:e,apiKey:a}){let l="";if(a){l=`${`https://api.hubapi.com/forms/v2/forms/${e}?hapikey=${a}`}\n\n(Look under \`formFieldGroups\`)`}else l="`apiKey` is undefined";console.debug(`%c useHubspotForm %cdebug: true\n\n${l}`,"background-color: #fff; color: #000;")}({formId:s,apiKey:h});const v=m.map((e=>{const a="radio"===e.type?d:"checkbox"===e.type?o:"select"===e.type?r:"textarea"===e.type?i:n;return({component:t=a,...n}={})=>l(t,{...e,...n})}));return{onSubmit:k,response:f,result:y,Fields:v,Form:({children:e,...n})=>f?.ok&&y?.redirectUri?(window.location.href=y.redirectUri,l("p",{children:"Redirecting..."})):f?.ok&&y?.inlineMessage?l("div",{dangerouslySetInnerHTML:{__html:y.inlineMessage}}):l("form",{onSubmit:k,...n,children:e||a(t,{children:[v?.map(((e,a)=>l(e,{},a))),l("button",{type:"submit",children:u})]})})}}export{c as useHubspotForm};
