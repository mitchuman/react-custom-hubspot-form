{"version":3,"file":"index.jsx","sources":["index.jsx"],"sourcesContent":["import { useState } from 'react'\n\nexport function useHubspotForm({ portalId, formId, fields }) {\n\tconst [$response, set$response] = useState(null)\n\tconst [$result, set$result] = useState(null)\n\n\tasync function onSubmit(e) {\n\t\te.preventDefault()\n\n\t\tconst fields = Array.from(e.target.elements)\n\t\t\t.filter(({ name }) => !!name)\n\t\t\t.map(input => ({\n\t\t\t\tname: input.name,\n\t\t\t\tvalue: input.type == 'checkbox' ? String(input.checked) : input.value,\n\t\t\t}))\n\n\t\tconst response = await submitHubspot({ portalId, formId, fields })\n\t\tset$response(response)\n\t\tset$result(response?.ok && await response.json())\n\t}\n\n\tconst Fields = fields.map(field => {\n\t\tconst Field =\n\t\t\tfield.type === 'checkbox' ? Checkbox :\n\t\t\tfield.type === 'select' ? Select :\n\t\t\tfield.type === 'textarea' ? Textarea :\n\t\t\tInput\n\n\t\treturn ({ component: Component = Field, ...props } = {}) =>\n\t\t\t<Component {...field} {...props} />\n\t})\n\n\tconst Form = ({ children, ...props }) => {\n\t\t// redirect\n\t\tif ($response?.ok && !!$result?.redirectUri) {\n\t\t\twindow.location.href = $result.redirectUri\n\t\t\treturn <p>Redirecting...</p>\n\t\t}\n\n\t\t// response message\n\t\tif ($response?.ok && !!$result?.inlineMessage) {\n\t\t\treturn <div dangerouslySetInnerHTML={{ __html: $result.inlineMessage }} />\n\t\t}\n\n\t\treturn <form onSubmit={onSubmit} {...props}>\n\t\t\t{children || <>\n\t\t\t\t{Fields?.map((Field, key) => <Field key={key} />)}\n\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t</>}\n\t\t</form>\n\t}\n\n\treturn {\n\t\tonSubmit,\n\t\tresponse: $response,\n\t\tresult: $result,\n\t\tFields,\n\t\tForm,\n\t}\n}\n\nasync function submitHubspot({ portalId, formId, fields }) {\n\tconst url = `https://api.hsforms.com/submissions/v3/integration/submit/${ portalId }/${ formId }`\n\treturn await fetch(url, {\n\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tbody: JSON.stringify({ fields })\n\t})\n}\n\n/* fields */\n\nconst Input = ({ label, className, value, ...props }) => (\n\t// TODO: add error handling\n\t<label htmlFor={props.name} className={className}>\n\t\t<small>{label}{props.required && <span>*</span>}</small>\n\t\t<input\n\t\t\tid={props.name}\n\t\t\tplaceholder={label}\n\t\t\tdefaultValue={value}\n\t\t\t{...props}\n\t\t/>\n\t</label>\n)\n\nconst Textarea = ({ label, className, value, ...props }) => (\n\t<label htmlFor={props.name}>\n\t\t<small>{label}{props.required && <span>*</span>}</small>\n\t\t<textarea\n\t\t\tid={props.name}\n\t\t\tplaceholder={label}\n\t\t\tchildren={value}\n\t\t\t{...props}\n\t\t/>\n\t</label>\n)\n\nconst Select = ({ label, options, value = '', className, ...props }) => (\n\t<label htmlFor={props.name} className={className}>\n\t\t<small>{label}{props.required && <span>*</span>}</small>\n\t\t<select id={props.name} defaultValue={value} {...props}>\n\t\t\t<option value=\"\" disabled>Please select</option>\n\t\t\t{options?.map((option, key) => (\n\t\t\t\t<option value={option} key={key}>{option}</option>\n\t\t\t))}\n\t\t</select>\n\t</label>\n)\n\nconst Checkbox = ({ label, className, value, ...props }) => (\n\t<label htmlFor={props.name} className={className}>\n\t\t<input\n\t\t\tid={props.name}\n\t\t\tdefaultChecked={value}\n\t\t\tdefaultValue={value}\n\t\t\t{...props}\n\t\t/>\n\t\t{label}\n\t</label>\n)\n"],"names":["useHubspotForm","portalId","formId","fields","$response","set$response","useState","$result","set$result","onSubmit","e","preventDefault","Array","from","target","elements","filter","name","map","input","value","type","String","checked","response","submitHubspot","ok","json","Fields","field","Field","Checkbox","Select","Textarea","Input","component","Component","props","Form","children","redirectUri","window","location","href","inlineMessage","__html","key","result","url","fetch","method","headers","body","JSON","stringify","label","className","required","options","option"],"mappings":"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"}